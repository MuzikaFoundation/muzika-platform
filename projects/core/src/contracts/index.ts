/* GENERATED BY TYPECHAIN VER. 0.1.5-remake */
/* tslint:disable */
import { isPlatformBrowser } from '@angular/common';
import { InjectionToken, PLATFORM_ID, Provider } from '@angular/core';
import { WEB3 } from '../web3.provider';
import { Web3 } from '../types/web3';
import { TruffleContract } from './typechain-runtime';

import { IMuzikaCoin, TruffleMuzikaCoin } from './interface/MuzikaCoin';
import { IMuzikaLoyaltyPoint, TruffleMuzikaLoyaltyPoint } from './interface/MuzikaLoyaltyPoint';
import { IMuzikaPaperContract, TruffleMuzikaPaperContract } from './interface/MuzikaPaperContract';

export { IMuzikaCoin, TruffleMuzikaCoin } from './interface/MuzikaCoin';
export { IMuzikaLoyaltyPoint, TruffleMuzikaLoyaltyPoint } from './interface/MuzikaLoyaltyPoint';
export { IMuzikaPaperContract, TruffleMuzikaPaperContract } from './interface/MuzikaPaperContract'

let ProviderFactory = (contractFunction: () => TruffleContract<any>) => {
  return (web3: Web3, platformId: string) => {
    if (isPlatformBrowser(platformId)) {
      let contract: TruffleContract<any> = contractFunction();
      web3.onProviderChange().subscribe(provider => {
        if (!!provider) {
          contract.setProvider(provider);
        }
      });
      return contract;
    }

    // @TODO is that works?
    return null;
  };
};

export const MuzikaCoin = new InjectionToken<TruffleContract<IMuzikaCoin>>('MuzikaCoin');
export const MuzikaLoyaltyPoint = new InjectionToken<TruffleContract<IMuzikaLoyaltyPoint>>('MuzikaLoyaltyPoint');
export const MuzikaPaperContract = new InjectionToken<TruffleContract<IMuzikaPaperContract>>('MuzikaPaperContract');

export const ContractProviders: Provider[] = [
  { provide: MuzikaCoin, useFactory: ProviderFactory(TruffleMuzikaCoin), deps: [WEB3, PLATFORM_ID] },
  { provide: MuzikaLoyaltyPoint, useFactory: ProviderFactory(TruffleMuzikaLoyaltyPoint), deps: [WEB3, PLATFORM_ID] },
  { provide: MuzikaPaperContract, useFactory: ProviderFactory(TruffleMuzikaPaperContract), deps: [WEB3, PLATFORM_ID] }
];
